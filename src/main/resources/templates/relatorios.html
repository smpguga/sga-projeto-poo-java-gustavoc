<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Relat√≥rios Gerenciais</title>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        @media print {
            .no-print { display: none !important; }
            .card { border: none !important; }
        }
    </style>
</head>
<body>

<div class="no-print" th:replace="~{fragments/nav :: main-menu}"></div>

<div class="container mt-4">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>Relat√≥rios Acad√™micos</h1>
        <button onclick="window.print()" class="btn btn-secondary no-print">
            üñ®Ô∏è Imprimir / Salvar PDF
        </button>
    </div>

    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card text-white bg-primary mb-3">
                <div class="card-header">Total de Alunos</div>
                <div class="card-body">
                    <h2 class="card-title" th:text="${totalAlunos}">0</h2>
                    <p class="card-text">Estudantes cadastrados na institui√ß√£o.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-success mb-3">
                <div class="card-header">Cursos Ofertados</div>
                <div class="card-body">
                    <h2 class="card-title" th:text="${cursos.size()}">0</h2>
                    <p class="card-text">Cursos ativos no sistema.</p>
                </div>
            </div>
        </div>
    </div>

    <hr>

    <h3 class="mt-4">Ocupa√ß√£o de Vagas por Curso</h3>
    <table class="table table-bordered">
        <thead class="table-light">
        <tr>
            <th>Nome do Curso</th>
            <th>Carga Hor√°ria</th>
            <th>Qtd. Alunos</th> </tr>
        </thead>
        <tbody>
        <tr th:each="curso : ${cursos}">
            <td th:text="${curso.nome}"></td>
            <td th:text="${curso.carga_horaria} + 'h'"></td>
            <td>
                        <span class="badge bg-info text-dark"
                              th:text="${curso.alunos.size()} + ' Alunos'">
                        </span>
            </td>
        </tr>
        </tbody>
    </table>

    <hr class="mt-5">

    <h3 class="mt-4">Hist√≥rico de Matr√≠culas em Disciplinas</h3>
    <table class="table table-sm table-striped">
        <thead>
        <tr>
            <th>Data</th>
            <th>Aluno</th>
            <th>Disciplina</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="m : ${matriculas}">
            <td th:text="${#temporals.format(m.dataMatricula, 'dd/MM/yyyy')}"></td>
            <td th:text="${m.aluno.nome}"></td>
            <td th:text="${m.disciplina.nome}"></td>
        </tr>
        </tbody>
    </table>

    <footer class="mt-5 text-center text-muted">
        <p>Relat√≥rio gerado pelo Sistema SGA em <span th:text="${#execInfo.now.time}"></span></p>
    </footer>

</div>

</body>
</html>